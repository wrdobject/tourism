<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">

		<link rel="stylesheet" href="/layui/css/layui.css" media="all">
		<style>
			/*三级联动样式*/
			
			.sun {
				width: 100%;
				height: 38px;
				border: 1px solid #E6E6E6;
				border-radius: 2px;
			}
			
			.san {
				width: 286px;
				height: 176px;
				border: lightgray 1px solid;
				margin: 10px 15px 10px 15px;
			}
			
			td {
				padding: 3px 10px 3px 1px;
			}
			
			.layui-tab ul.layui-tab-title li:nth-child(1) i {
				display: none;
			}
		</style>

	</head>

	<body>

		<div class="layui-tab layui-tab-card" lay-filter="demo" lay-allowclose="true">
			<ul class="layui-tab-title">
				<li class="layui-this">餐厅</li>
			</ul>

			<div class="layui-tab-content">
				<!--内容一-->
				<div class="layui-tab-item layui-show">
					<fieldset class="layui-elem-field layui-field-title" style="margin-top: 5px;">
						<legend>餐厅管理</legend>
					</fieldset>
					<form id="queryInfo" action="javascript:;">
						<div class="layui-form-item">

							<!--三级联动-->
							<div class="layui-input-inline ">
								<select id="cmbProvince" class="sun" lay-filter="province">

								</select>
							</div>
							<div class="layui-input-inline ">
								<select id="cmbCity" class="sun" lay-filter="city">

								</select>
							</div>
							<div class="layui-input-inline ">
								<select id="cmbArea" class="sun" lay-filter="area">

								</select>
							</div>
							<div class="layui-inline">
								<div class="layui-input-inline" style="width: 150px;">
									<input type="text" name="name" lay-verify="name" autocomplete="off" placeholder="公司名称/简拼" class="layui-input">
								</div>
								<button class="layui-btn layui-btn-radius" lay-submit="" lay-filter="queryInfoBtn">搜索</button>

								<a href="javascript:;" class="layui-btn site-demo-active layui-btn-radius" data-url="restaurant_add" data-id="restaurant_add" data-title="添加餐厅信息" data-type="tabAdd"><i class="layui-icon">&#xe654;添加餐厅信息</i></a>
							</div>
							<div style="display: none;">
								<button href="javascript:;" id="restaurant_info" class="layui-btn site-demo-active" data-url="restaurant_add" hidden="hidden" data-id="ticket_update" data-title="修改餐厅信息" data-type="tabAdd">修改餐厅信息</button>
							</div>
						</div>
					</form>
					

					<div class="layui-row ">
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>
							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>
						<div class="layui-col-md5 san">

							<a href="javascript:;" class="site-demo-active" data-url="restaurant_info" data-id="restaurant_info" data-title="餐厅详情" data-type="tabAdd">
								<img src="/layui/images/5-5.jpg" style="width: 250px; height: 110px; margin: 2px 3px 1px 16px; border: 1px solid silver;" />
								<h5>&nbsp;&nbsp;&nbsp;餐厅：顺丰</h5>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系人：</span></p>
								<p>&nbsp;&nbsp;&nbsp;<span class="tit">联系方式：</span></p>

							</a>
						</div>

					</div>

					<div id="demo7"></div>
				</div>
			</div>
			</div>


			<script type="text/javascript" src="/jquery-3.3.1.min.js" charset="UTF-8"></script>
			<script src="/layui/layui.js" charset="utf-8"></script>
			<script type="text/javascript" src="/layui/lay/3js/city.js"></script>

			<script type="text/javascript">
				$(function() {
					//三级联动
					addressInit('cmbProvince', 'cmbCity', 'cmbArea');
				})

				layui.use('element', function() {
					var $ = layui.jquery,
						element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

					var active = {
						tabAdd: function(url, id, name) {
							//新增一个Tab项 传入三个参数，分别对应其标题，tab页面的地址，还有一个规定的id，是标签中data-id的属性值
							//关于tabAdd的方法所传入的参数可看layui的开发文档中基础方法部分
							element.tabAdd('demo', {
								title: name,
                                content: '<iframe data-frameid="' + id + '" scrolling="auto" frameborder="0" src="' + url + '.do" style="width:100%;height:99%;"></iframe>',
								id: id //规定好的id
							})
							/*CustomRightClick(id);*/ //给tab绑定右击事件
							FrameWH(); //计算ifram层的大小
						},
						tabChange: function(id) {
							//切换到指定Tab项
							element.tabChange('demo', id); //根据传入的id传入到指定的tab项
						},
					};
					$('.site-demo-active').on('click', function() {
						var dataid = $(this);

						//这时会判断右侧.layui-tab-title属性下的有lay-id属性的li的数目，即已经打开的tab项数目
						if($(".layui-tab-title li[lay-id]").length <= 0) {
							//如果比零小，则直接打开新的tab项
							active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.attr("data-title"));
						} else {
							//否则判断该tab项是否以及存在

							var isData = false; //初始化一个标志，为false说明未打开该tab项 为true则说明已有
							$.each($(".layui-tab-title li[lay-id]"), function() {
								//如果点击左侧菜单栏所传入的id 在右侧tab项中的lay-id属性可以找到，则说明该tab项已经打开
								if($(this).attr("lay-id") == dataid.attr("data-id")) {
									isData = true;
								}
							})
							if(isData == false) {
								//标志为false 新增一个tab项
								active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.attr("data-title"));
							}
						}
						//最后不管是否新增tab，最后都转到要打开的选项页面上
						active.tabChange(dataid.attr("data-id"));
					});

					function FrameWH() {

						$("iframe").css("height", "553px");
					}

					$(window).resize(function() {
						FrameWH();
					})

				});

				layui.use(['form', 'layedit', 'laydate', 'element', 'laypage', 'layer'], function() {

					var element = layui.element;
					var laypage = layui.laypage,
						layer = layui.layer;
					//分页
					laypage.render({
						elem: 'demo7',
						count: 16,
						layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip'],
						jump: function(obj) {

						}
					});

					//监听提交
					/*	form.on('submit(demo1)', function(data) {
							layer.alert(JSON.stringify(data.field), {
								title: '最终的提交信息'
							})
							return false;
						});*/

				});
			</script>

	</body>

</html>