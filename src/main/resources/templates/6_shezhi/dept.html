<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="layui/css/layui.css" />
		<style>
			.sun {
				width: 100%;
				height: 38px;
				border: 1px solid #E6E6E6;
				border-radius: 2px;
			}
		</style>
	</head>

	<body>
		<div class="layui-main">
			
<fieldset class="layui-elem-field layui-field-title layui-clear" style="margin-top: 15px;">
			<legend>部门管理</legend>

			

		</fieldset>
			<!--<button class="layui-btn layui-btn-sm">新增组织</button>-->
			<button data-method="offset" data-type="auto" class="layui-btn layui-btn-sm" onclick="add()">新增部门</button>
			<div class="layui-tab-item layui-show">
				<div class="layui-main">

					<table class="layui-table" lay-size="sm" style="text-align: center;">
						<colgroup>
							<col width="150">
							<col width="200">
							<col width="300">
						</colgroup>
						<thead>
							<tr>
								<th style="text-align:center;">部门编号</th>
								<th style="text-align:center;">部门名称</th>
								<th style="text-align:center;">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<td>计调部</td>
								<td>
									<button class="layui-btn layui-btn-xs" onclick="addTicketInfo()">编辑</button>
									<button class="layui-btn layui-btn-danger layui-btn-xs">删除</button>
								</td>
							</tr>

							<tr>
								<td>2</td>
								<td>导游部</td>
								<td>
									<button class="layui-btn layui-btn-xs" onclick="addTicketInfo()">编辑</button>
									<button class="layui-btn layui-btn-danger layui-btn-xs">删除</button>
								</td>

							</tr>
							<tr>
								<td>3</td>
								<td>入境部</td>
								<td>
									<button class="layui-btn layui-btn-xs" onclick="addTicketInfo()">编辑</button>
									<button class="layui-btn layui-btn-danger layui-btn-xs">删除</button>
								</td>

							</tr>
							<tr>
								<td>4</td>
								<td>财务部</td>
								<td>
									<button class="layui-btn layui-btn-xs" onclick="addTicketInfo()">编辑</button>
									<button class="layui-btn layui-btn-danger layui-btn-xs">删除</button>
								</td>
							</tr>
							<tr>
								<td>5</td>
								<td>人事部</td>
								<td>
									<button class="layui-btn layui-btn-xs" onclick="addTicketInfo()">编辑</button>
									<button class="layui-btn layui-btn-danger layui-btn-xs">删除</button>
								</td>
							</tr>
							
						</tbody>
					</table>
			</div>
		</div>
		
		<script src="layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="jquery-3.3.1.min.js" charset="UTF-8"></script>
		<script>
			
			
			$(function(){
				//三级联动
				addressInit('cmbProvince', 'cmbCity', 'cmbArea');    
			});

			function addTicketInfo() {
				layui.use('layer', function() {
					var layer = layui.layer;
					var $ = jQuery.noConflict();
					layer.open({
						type: 1,
						content: '<form id="addTicketInfo" method="post" style="margin:30px 0px 0px 20px;" >' +
							

							'<div class="layui-form-item">' +
							'	<td><label class="layui-form-label">部门名称</label>' +
							'		<div class="layui-input-inline">' +
							'			<input type="text" name="hotel_phone" lay-verify="required|phone" autocomplete="off" class="layui-input">' +
							'		</div>' +
							'</div>' +
							'</form>',
						area: ['380px', '309px'],
						btn: ['确认', '取消'],
						yes: function(index, layero) {
							//按钮【按钮一】的回调
							alert(decodeURIComponent($("#addTicketInfo").serialize()));
							/*关闭*/
							layer.close(index);

						},
						btn2: function(index, layero) {
							//按钮【按钮二】的回调
						},
						cancel: function() {
							//右上角关闭回调
							//return false 开启该代码可禁止点击该按钮关闭
						},
						btnAlign: 'c',
						move: false,
						resize: false
					});
				});
			}

			function add() {
				layui.use('layer', function() {
					var layer = layui.layer;
					var $ = jQuery.noConflict();
					layer.open({
						type: 1,
						content: '<form id="addRelationInfo" method="post" style="margin:30px 0px 0px 20px;" class="layui-form">' +
						

							'<div class="layui-form-item">' +
							'	<label class="layui-form-label">部门名称</label>' +
							'	<div class="layui-input-inline">' +
							'		<input type="text" name="hotel_name" lay-verify="title" autocomplete="off" class="layui-input">' +
							'	</div>' +

							'</div>' +

							'</form>',
						area: ['380px', '200px'],
						btn: ['确认', '取消'],
						yes: function(index, layero) {
							//按钮【按钮一】的回调
							alert(decodeURIComponent($("#addRelationInfo").serialize()));
							/*关闭*/
							layer.close(index);

						},
						btn2: function(index, layero) {
							//按钮【按钮二】的回调
						},
						cancel: function() {
							//右上角关闭回调
							//return false 开启该代码可禁止点击该按钮关闭
						},
						btnAlign: 'c',
						move: false,
						resize: false
					});
				});
			}
			
			layui.use('element', function() {
				var $ = layui.jquery,
					element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

				var active = {
					tabAdd: function(url, id, name) {
						//新增一个Tab项 传入三个参数，分别对应其标题，tab页面的地址，还有一个规定的id，是标签中data-id的属性值
						//关于tabAdd的方法所传入的参数可看layui的开发文档中基础方法部分
						element.tabAdd('demo', {
							title: name,
							content: '<iframe data-frameid="' + id + '" scrolling="auto" frameborder="0" src="' + url + '.html" style="width:100%;height:99%;"></iframe>',
							id: id //规定好的id
						});
						/*CustomRightClick(id);*/ //给tab绑定右击事件
						FrameWH(); //计算ifram层的大小
					},
					tabChange: function(id) {
						//切换到指定Tab项
						element.tabChange('demo', id); //根据传入的id传入到指定的tab项
					},
				};
				$('.site-demo-active').on('click', function() {
					var dataid = $(this);

					//这时会判断右侧.layui-tab-title属性下的有lay-id属性的li的数目，即已经打开的tab项数目
					if($(".layui-tab-title li[lay-id]").length <= 0) {
						//如果比零小，则直接打开新的tab项
						active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.attr("data-title"));
					} else {
						//否则判断该tab项是否以及存在

						var isData = false; //初始化一个标志，为false说明未打开该tab项 为true则说明已有
						$.each($(".layui-tab-title li[lay-id]"), function() {
							//如果点击左侧菜单栏所传入的id 在右侧tab项中的lay-id属性可以找到，则说明该tab项已经打开
							if($(this).attr("lay-id") == dataid.attr("data-id")) {
								isData = true;
							}
						});
						if(isData == false) {
							//标志为false 新增一个tab项
							active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.attr("data-title"));
						}
					}
					//最后不管是否新增tab，最后都转到要打开的选项页面上
					active.tabChange(dataid.attr("data-id"));
				});

				function FrameWH() {

					$("iframe").css("height", "553px");
				}

				$(window).resize(function() {
					FrameWH();
				})

			});

			layui.use(['form', 'layedit', 'laydate', 'element', 'laypage', 'layer'], function() {

				var element = layui.element;
				var laypage = layui.laypage,
					layer = layui.layer;
				//分页
				laypage.render({
					elem: 'demo7',
					count: 16,
					layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip'],
					jump: function(obj) {
						
					}
				});

				//监听提交
				/*	form.on('submit(demo1)', function(data) {
						layer.alert(JSON.stringify(data.field), {
							title: '最终的提交信息'
						})
						return false;
					});*/

			});
		</script>
	</body>

</html>